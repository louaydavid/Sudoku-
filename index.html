<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sudoku Master</title>
  <style>
    :root {
       --bg: #0c0c0d;              /* Very dark background */
  --fg: #d9d9d9;              /* Light gray text */
  --accent: #794333;          /* Green accent */
  --block1: #121214;          /* Slightly lighter black for blocks */
  --block2: #1a1a1b;          /* Another subtle dark block color */
  --input-bg: #18181a;        /* Input backgrounds */
  --input-border: #3232bd;    /* Input border color */
  --input-focus-bg: #121d5f;  /* Input focus background (green) */
  --input-focus-color: #000000; 
    }

    body {
      background: var(--bg);
      color: var(--fg);
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      text-align: center;
    }

    h1 {
      color: var(--accent);
    }

    select, button {
      background: var(--input-bg);
      color: var(--fg);
      border: none;
      padding: 10px;
      margin: 5px;
      border-radius: 5px;
      font-size: 1rem;
    }

    #board {
  display: grid;
  margin: 20px auto;
  gap: 2px;
  max-width: 100vw;
  justify-content: center;
}

    input.cell {
      width: 100%;
      height: 40px;
      text-align: center;
      font-size: 1rem;
      background: var(--input-bg);
      color: var(--fg);
      border: 1px solid #444;
      border-radius: 4px;
    }

    input.cell[disabled] {
      color: #999;
    }

    .cell[data-block="even"] {
      background: var(--block1);
    }

    .cell[data-block="odd"] {
      background: var(--block2);
    }

    #board.size-9 { grid-template-columns: repeat(9, 40px); }
    #board.size-12 { grid-template-columns: repeat(12, 36px); }
    #board.size-16 { grid-template-columns: repeat(16, 32px); }

    @media (max-width: 600px) {
      #board.size-9 { grid-template-columns: repeat(9, 30px); }
      #board.size-12 { grid-template-columns: repeat(12, 28px); }
      #board.size-16 { grid-template-columns: repeat(16, 24px); }
      input.cell { height: 28px; font-size: 0.8rem; }
    }

    #message {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Sudoku Master</h1>
  <div id="controls">
    <select id="mode" onchange="generate()">
      <option value="play">Play</option>
      <option value="solve">Solve</option>
    </select>
    <select id="boardSize" onchange="generate()">
      <option value="9">9 x 9</option>
      <option value="12">12 x 12</option>
      <option value="16">16 x 16</option>
    </select>
    <select id="difficulty">
      <option value="easy">Easy</option>
      <option value="medium">Medium</option>
      <option value="hard">Hard</option>
    </select>
    <button onclick="generate()">Generate</button>
    <button onclick="check()">Check</button>
    <button onclick="solve()">Solve</button>
    <button onclick="clearBoard()">Clear</button>
  </div>
  <div id="board" class="size-9"></div>
  <div id="message"></div>

  <script>
    let boardSize = 9;
    let blockSize = [3, 3];
    let board = [];

    const modeEl = document.getElementById("mode");
    const sizeEl = document.getElementById("boardSize");
    const diffEl = document.getElementById("difficulty");
    const boardEl = document.getElementById("board");
    const messageEl = document.getElementById("message");

    function getBlockSize(size) {
      if (size === 12) return [3, 4];
      if (size === 16) return [4, 4];
      return [3, 3];
    }

    function toChar(n) {
      return n <= 9 ? n.toString() : String.fromCharCode(55 + n); // A=10, B=11, C=12...
    }

    function fromChar(ch) {
      if (!ch) return 0;
      const code = ch.toUpperCase().charCodeAt(0);
      if (code >= 49 && code <= 57) return parseInt(ch);
      if (code >= 65) return code - 55;
      return 0;
    }

    function renderBoard() {
      boardEl.innerHTML = '';
      boardEl.className = 'size-' + boardSize;

      const [blockR, blockC] = blockSize;
      for (let r = 0; r < boardSize; r++) {
        for (let c = 0; c < boardSize; c++) {
          const input = document.createElement("input");
          input.className = "cell";
          input.maxLength = 2;
          input.dataset.r = r;
          input.dataset.c = c;

          const block = (Math.floor(r / blockR) + Math.floor(c / blockC)) % 2;
          input.dataset.block = block === 0 ? "even" : "odd";

          if (board[r][c]) {
            input.value = toChar(board[r][c]);
            input.disabled = modeEl.value === "play";
          }

          boardEl.appendChild(input);
        }
      }
    }

    function clearBoard() {
      document.querySelectorAll(".cell").forEach(cell => {
        cell.value = "";
        cell.disabled = false;
      });
      messageEl.textContent = "";
    }

    function getUserBoard() {
      const userBoard = Array.from({ length: boardSize }, () => Array(boardSize).fill(0));
      document.querySelectorAll(".cell").forEach(cell => {
        const r = parseInt(cell.dataset.r);
        const c = parseInt(cell.dataset.c);
        const val = fromChar(cell.value.trim());
        userBoard[r][c] = val;
      });
      return userBoard;
    }

    function isValid(board, r, c, val) {
      for (let i = 0; i < boardSize; i++) {
        if (board[r][i] === val || board[i][c] === val) return false;
      }
      const [br, bc] = blockSize;
      const sr = Math.floor(r / br) * br;
      const sc = Math.floor(c / bc) * bc;
      for (let i = sr; i < sr + br; i++) {
        for (let j = sc; j < sc + bc; j++) {
          if (board[i][j] === val) return false;
        }
      }
      return true;
    }

    function solveBoard(grid) {
      for (let r = 0; r < boardSize; r++) {
        for (let c = 0; c < boardSize; c++) {
          if (grid[r][c] === 0) {
            for (let num = 1; num <= boardSize; num++) {
              if (isValid(grid, r, c, num)) {
                grid[r][c] = num;
                if (solveBoard(grid)) return true;
                grid[r][c] = 0;
              }
            }
            return false;
          }
        }
      }
      return true;
    }

    function generateFullBoard() {
      const grid = Array.from({ length: boardSize }, () => Array(boardSize).fill(0));
      solveBoard(grid); // start with full valid board
      return grid;
    }

    function removeCells(grid, difficulty) {
      const total = boardSize * boardSize;
      const level = {
        easy: 0.4,
        medium: 0.55,
        hard: 0.7
      }[difficulty] || 0.4;
      const toRemove = Math.floor(total * level);

      let removed = 0;
      while (removed < toRemove) {
        const r = Math.floor(Math.random() * boardSize);
        const c = Math.floor(Math.random() * boardSize);
        if (grid[r][c] !== 0) {
          grid[r][c] = 0;
          removed++;
        }
      }
    }

    function generate() {
      messageEl.textContent = "";
      boardSize = parseInt(sizeEl.value);
      blockSize = getBlockSize(boardSize);

      if (modeEl.value === "solve") {
        board = Array.from({ length: boardSize }, () => Array(boardSize).fill(0));
        renderBoard();
        return;
      }

      board = generateFullBoard();
      removeCells(board, diffEl.value);
      renderBoard();
    }

    function solve() {
      const userBoard = getUserBoard();
      const clone = JSON.parse(JSON.stringify(userBoard));
      if (solveBoard(clone)) {
        board = clone;
        renderBoard();
        messageEl.textContent = "✅ Solved!";
      } else {
        messageEl.textContent = "❌ Unsolvable board.";
      }
    }

    function check() {
      const g = getUserBoard();
      for (let r = 0; r < boardSize; r++) {
        for (let c = 0; c < boardSize; c++) {
          const val = g[r][c];
          if (val !== 0) {
            g[r][c] = 0;
            if (!isValid(g, r, c, val)) {
              messageEl.textContent = `❌ Wrong value at row ${r + 1}, col ${c + 1}`;
              return;
            }
            g[r][c] = val;
          }
        }
      }
      messageEl.textContent = "✅ Looks good!";
    }

    window.onload = () => {
      generate();
    };
  </script>
</body>
</html>
